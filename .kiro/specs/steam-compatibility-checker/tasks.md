# 実装計画: Steam相性診断

## 概要

Next.jsとTypeScriptを使用してSteam相性診断webサイトを構築します。完全に静的サイトとして動作し、Vercelでデプロイします。co-opゲーム提案機能も含みます。

## タスク

- [x] 1. プロジェクト初期設定とコア型定義
  - Next.js 14プロジェクトの作成とTailwind CSS設定
  - Steam API関連の型定義とインターフェース作成
  - co-opゲーム関連の型定義追加
  - 基本的なプロジェクト構造の構築
  - _要件: 7.1, 7.3_

- [x] 2. Steam認証システムの実装
  - [x] 2.1 Steam OpenID認証の実装
    - OpenID認証URLの生成とリダイレクト処理
    - 認証コールバックの処理とSteam ID抽出
    - _要件: 1.1, 1.2_

  - [x] 2.2 認証状態管理の実装
    - React Contextによる認証状態管理
    - セッション中のユーザー情報保持
    - _要件: 1.4_

  - [x] 2.3 認証エラーハンドリング
    - 認証失敗時のエラー表示と再試行機能
    - セッション期限切れの処理
    - _要件: 1.3_

- [x] 3. Steam API統合の実装
  - [x] 3.1 Steam API サービスクラスの実装
    - GetOwnedGames APIの呼び出し実装
    - GetPlayerSummaries APIの呼び出し実装
    - VanityURL解決機能の実装
    - _要件: 2.1, 3.1_

  - [x] 3.2 API エラーハンドリングと再試行機能
    - レート制限処理と指数バックオフ実装
    - ネットワークエラーの処理
    - 非公開プロフィールの検出と通知
    - _要件: 2.3, 2.4, 6.1, 6.3_

  - [x] 3.3 セッション中キャッシュの実装
    - API レスポンスのメモリキャッシュ
    - 重複リクエストの回避機能
    - _要件: 5.3_

- [x] 4. 相性分析エンジンの実装
  - [x] 4.1 基本相性分析アルゴリズムの実装
    - 共通ゲーム検出ロジック
    - 基本相性スコア計算アルゴリズム
    - ジャンル相性分析機能
    - プレイ時間相性分析機能
    - _要件: 3.2, 3.3_

  - [x] 4.2 co-opゲーム提案機能の実装
    - 共通ゲームからco-op対応ゲームの抽出
    - co-opゲーム情報データベース（静的データ）の作成
    - co-opボーナススコアの計算
    - co-opゲーム提案アルゴリズムの実装
    - _要件: 3.3, 4.1_

  - [ ]* 4.3 ゲーム推奨機能の実装
    - 相性に基づくゲーム推奨アルゴリズム
    - 推奨理由の生成機能
    - _要件: 3.4_

- [ ] 5. チェックポイント - コア機能の動作確認
  - すべてのコア機能が正常に動作することを確認し、問題があれば質問する

- [ ] 6. UI コンポーネントの実装
  - [ ] 6.1 認証関連UIの実装
    - Steamログインボタンコンポーネント
    - ユーザープロフィール表示コンポーネント
    - 認証状態に応じたUI切り替え
    - _要件: 1.1, 1.2_

  - [ ] 6.2 ゲームライブラリ表示UIの実装
    - ゲームライブラリ一覧表示
    - ゲーム数とプレイ時間の表示
    - ローディング状態の表示
    - _要件: 2.2, 5.2_

  - [ ] 6.3 相性診断フォームの実装
    - Steam ID/URL入力フォーム
    - 入力検証とエラー表示
    - 診断実行ボタンとローディング状態
    - _要件: 3.1, 6.2_

- [ ] 7. 結果表示機能の実装
  - [ ] 7.1 相性結果表示コンポーネント
    - 相性スコアの視覚的表示
    - 共通ゲーム一覧の表示
    - ジャンル相性の内訳表示
    - プレイ時間比較の表示
    - _要件: 4.1, 4.2_

  - [ ] 7.2 co-opゲーム提案表示コンポーネント
    - co-opゲーム一覧の表示
    - co-opタイプ（ローカル/オンライン）の表示
    - 最大プレイヤー数の表示
    - Steamストアページへのリンク
    - _要件: 4.1, 4.2_

  - [ ]* 7.3 結果シェア機能の実装
    - シェア可能URL生成機能
    - サマリーカード生成機能
    - ソーシャルメディア共有ボタン
    - _要件: 4.3, 4.4_

- [ ] 8. レスポンシブデザインの実装
  - [ ] 8.1 モバイル対応の実装
    - スマートフォン画面での最適化
    - タッチ操作に適したUI調整
    - co-op提案の表示最適化
    - _要件: 5.1_

  - [ ]* 8.2 タブレット対応の実装
    - タブレット画面での最適化
    - 中間サイズでのレイアウト調整
    - _要件: 5.1_

- [ ] 9. エラーハンドリングとユーザビリティの向上
  - [ ] 9.1 包括的エラーハンドリング
    - Steam API障害時のメッセージ表示
    - 無効入力に対する分かりやすいエラーメッセージ
    - 非公開プロフィールユーザーへの案内
    - co-op情報取得失敗時の処理
    - _要件: 6.1, 6.2, 6.4_

  - [ ]* 9.2 アクセシビリティ対応
    - スクリーンリーダー対応
    - キーボードナビゲーション対応
    - 適切なARIAラベルの設定
    - _要件: 5.1_

- [ ] 10. 最終統合とデプロイメント準備
  - [ ] 10.1 全機能の統合
    - すべてのコンポーネントの統合
    - ルーティングの最終調整
    - 環境変数の設定
    - _要件: 7.1, 7.3_

  - [ ] 10.2 Vercelデプロイメント設定
    - 静的サイト生成の最適化
    - 環境変数の設定
    - デプロイメント設定の調整
    - _要件: 7.1, 7.2_

- [ ] 11. 最終チェックポイント - 全機能動作確認
  - すべての機能が正常に動作し、要件を満たしていることを確認する

## 注意事項

- 各タスクは前のタスクの完了を前提として構築される
- Steam Web API Keyは環境変数として設定する
- 完全に静的サイトとして動作するよう実装する
- co-opゲーム情報は静的データとして管理する
- エラーハンドリングを各段階で適切に実装する
- レスポンシブデザインを考慮したUI実装を行う
- `*`マークのタスクはオプションで、MVP完成後に実装可能